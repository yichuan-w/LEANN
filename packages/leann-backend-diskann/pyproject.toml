[build-system]
requires = ["scikit-build-core>=0.10", "pybind11>=2.12.0", "numpy"]
build-backend = "scikit_build_core.build"

[project]
name = "leann-backend-diskann"
version = "0.1.8"
dependencies = ["leann-core==0.1.8", "numpy"]

[tool.scikit-build]
# Key: simplified CMake path
cmake.source-dir = "third_party/DiskANN"
# Key: Python package in root directory, paths match exactly
wheel.packages = ["leann_backend_diskann"]
# Use default redirect mode
editable.mode = "redirect"
cmake.build-type = "Release"
build.verbose = true
build.tool-args = ["-j8"]
wheel.exclude = ["CMakeLists.txt", "src", "third_party/**", "*.o", "*.so"]
sdist.include = ["CMakeLists.txt", "src", "third_party", "leann_backend_diskann/*.txt"]

[tool.scikit-build.cmake.define]
CMAKE_BUILD_PARALLEL_LEVEL = "8"
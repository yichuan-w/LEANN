# packages/leann-backend-hnsw/pyproject.toml

[build-system]
requires = ["scikit-build-core>=0.10", "numpy", "swig"]
build-backend = "scikit_build_core.build"

[project]
name = "leann-backend-hnsw"
version = "0.3.1"
description = "Custom-built HNSW (Faiss) backend for the Leann toolkit."
dependencies = [
    "leann-core==0.3.1",
    "numpy",
    "pyzmq>=23.0.0",
    "msgpack>=1.0.0",
]

[tool.scikit-build]
wheel.packages = ["leann_backend_hnsw"]
editable.mode = "redirect"
cmake.build-type = "Release"
build.verbose = true
build.tool-args = ["-j8"]

# CMake definitions to optimize compilation and find Homebrew packages
[tool.scikit-build.cmake.define]
CMAKE_BUILD_PARALLEL_LEVEL = "8"
CMAKE_PREFIX_PATH = {env = "CMAKE_PREFIX_PATH"}
OpenMP_ROOT = {env = "OpenMP_ROOT"}
